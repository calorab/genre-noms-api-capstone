<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Api Stack Overflow</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            /*function to sanitize the JSON if it is necesary*/
            function sanitizeJSON(unsanitized) {
                var str = JSON.stringify(unsanitized);
                var output = str.replace(/\\/g, "\\\\").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\t/g, "\\t").replace(/\f/g, "\\f").replace(/"/g, "\\\"").replace(/'/g, "\\\'").replace(/\&/g, "\\&");
                return output;
            }
            /*
            JSONP, which stands for "JSON with Padding" (and JSON stands for JavaScript Object Notation), is a way to get data from another domain that bypasses CORS (Cross Origin Resource Sharing) rules. CORS is a set of "rules," about transferring data between sites that have a different domain name from the client.
            We would like to see if we can get an valid JSON result which we can parse in using AJAX
            */
            /* Update all the parameters for your API test*/
            let movieGenre = $('.js-genres').val();

            let sweetMax = 0;
            let sweetMin = 0;
            let sourMax = 0;
            let sourMin = 0;
            let saltyMax = 0;
            let saltyMin = 0;
            let piquantMax = 0;
            let piquantMin = 0;
            let meatyMax = 0;
            let meatyMin = 0;
            let bitterMax = 0;
            let bitterMin = 0;

            if (movieGenre == 'Mystery') { //personalized example of movie genre
                sweetMax = 0.5;
                sweetMin = 0;
                sourMax = 1;
                sourMin = 0.5;
                saltyMax = 1;
                saltyMin = 0.5;
                piquantMax = 0.2;
                piquantMin = 0;
                meatyMax = 0.5;
                meatyMin = 0;
                bitterMax = 0.3;
                bitterMin = 0;
            } 
            else if (movieGenre == 'Romance') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.5;
                sourMax = 0.4;
                sourMin = 0;
                saltyMax = 0.6;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 0.8;
                bitterMin = 0.24;
            }
            else if (movieGenre == 'Crime') { //template for the following IF's
                sweetMax = 0;
                sweetMin = 0;
                sourMax = 0.8;
                sourMin = 0.3;
                saltyMax = 1;
                saltyMin = 0.5;
                piquantMax = 1;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0;
                bitterMax = 0.7;
                bitterMin = 0.2;
            }
            else if (movieGenre == 'Comedy') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.5;
                sourMax = 1;
                sourMin = 0.5;
                saltyMax = 0.5;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 0.6;
                meatyMin = 0;
                bitterMax = 1;
                bitterMin = 0.3;
            }
            else if (movieGenre == 'Animation') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.5;
                sourMax = 1;
                sourMin = 0.5;
                saltyMax = 0.5;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 0.6;
                meatyMin = 0;
                bitterMax = 0.4;
                bitterMin = 0;
            }
            else if (movieGenre == 'Sci-fi') { //template for the following IF's
                sweetMax = 0.6;
                sweetMin = 0.1;
                sourMax = 0.4;
                sourMin = 0;
                saltyMax = 1;
                saltyMin = 0.5;
                piquantMax = 0.4;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 0.75;
                bitterMin = 0.25;
            }
            else if (movieGenre == 'Adventure') { //template for the following IF's
                sweetMax = 0.35;
                sweetMin = 0;
                sourMax = 0.5;
                sourMin = 0;
                saltyMax = 1;
                saltyMin = 0.5;
                piquantMax = 0.5;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 0.6;
                bitterMin = 0;
            }
            else if (movieGenre == 'Horror') { //template for the following IF's
                sweetMax = 0.3;
                sweetMin = 0;
                sourMax = 0.8;
                sourMin = 0;
                saltyMax = 1;
                saltyMin = 0;
                piquantMax = 1;
                piquantMin = 0.5;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = .75;
                bitterMin = 0;
            }
            else if (movieGenre == 'Fantasy') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.5;
                sourMax = 0.3;
                sourMin = 0;
                saltyMax = 0.75;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 0.5;
                bitterMin = 0;
            }
            else if (movieGenre == 'Action') { //template for the following IF's
                sweetMax = 0.3;
                sweetMin = 0;
                sourMax = 0.3;
                sourMin = 0;
                saltyMax = 0.6;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 1;
                bitterMin = 0.5;
            }
            else if (movieGenre == 'Rom-Com') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.5;
                sourMax = 0.3;
                sourMin = 0;
                saltyMax = 1;
                saltyMin = 0.5;
                piquantMax = 0.4;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.35;
                bitterMax = 0.5;
                bitterMin = 0;
            }
            else if (movieGenre == 'Thriller') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.5;
                sourMax = 0.3;
                sourMin = 0;
                saltyMax = 0.5;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.35;
                bitterMax = 1;
                bitterMin = 0.5;
            }
            else if (movieGenre == 'Drama') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.35;
                sourMax = 0.3;
                sourMin = 0;
                saltyMax = 0.5;
                saltyMin = 0;
                piquantMax = 1;
                piquantMin = 0.5;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 0.5;
                bitterMin = 0;
            }
            else if (movieGenre == 'Action-Comedy') { //template for the following IF's
                sweetMax = 1;
                sweetMin = 0.3;
                sourMax = 1;
                sourMin = 0.3;
                saltyMax = 0.5;
                saltyMin = 0;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 1;
                bitterMin = 0.5;
            }
            else if (movieGenre == 'Superhero') { //template for the following IF's
                sweetMax = 0.3;
                sweetMin = 0;
                sourMax = 0.5;
                sourMin = 0;
                saltyMax = 1;
                saltyMin = 0.5;
                piquantMax = 0.3;
                piquantMin = 0;
                meatyMax = 1;
                meatyMin = 0.5;
                bitterMax = 1;
                bitterMin = 0.5;
            }

            

            var params = {
                'flavor.sweet.min': sweetMin,
                'flavor.sweet.max': sweetMax,
                'flavor.sour.min': sourMin,
                'flavor.sour.max': sourMax,
                'flavor.salty.min': saltyMin,
                'flavor.salty.max': saltyMax,
                'flavor.meaty.min': meatyMin,
                'flavor.meaty.max': meatyMax,
                'flavor.bitter.min': bitterMin,
                'flavor.bitter.max': bitterMax,
                'flavor.piquant.min': piquantMin,
                'flavor.piquant.max': piquantMax
            };
            var result = $.ajax({
                /* update API end point */
                url: "http://api.yummly.com/v1/api/recipes?_app_id=bdc38e58&_app_key=c9fc6078a1ba99a9705c93899f54de71",
                data: params, //says get from params above
                dataType: "json",
                /*set the call type GET / POST*/
                type: "GET"
            })
            /* if the call is successful (status 200 OK) show results */
            .done(function (result) {
                /* if the results are meeningful, we can just console.log them */
                console.log(result);
                /* if the results are not meeningful, it might help to convert them to string first
                var displayStringifiedResults = JSON.stringify(result);
                console.log(displayStringifiedResults);*/
                /* if the results contain invalid json, it might help to sanitize them first
                var displaySanitizedResults = sanitizeJSON(result);
                console.log(displaySanitizedResults);*/
            })
            /* if the call is NOT successful show errors */
            .fail(function (jqXHR, error, errorThrown) {
                console.log(jqXHR);
                console.log(error);
                console.log(errorThrown);
            });
        });
    </script>

</head>

<body>
    <p>There is nothing to see here. Please check your console log instead</p>
</body>

</html>